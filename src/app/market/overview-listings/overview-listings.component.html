<app-header class="disable-select">
  <div class="control-bar" fxLayout="row" fxLayoutGap="20px" fxLayoutAlign="center center">

    <!-- Search-->
    <mat-form-field class="icon-input search-listings" fxFlex="0 0 250px" (click)="selectInput()">
      <input matInput type="text" class="header-input" id="searchbar" 
             placeholder="Search items for sale..">
      <!-- FIXME: *ngIf="query" isn't working -->
      <mat-icon *ngIf="query" (click)="query=''" matTooltip="Clear" fontSet="partIcon"
                fontIcon="part-clear-all"></mat-icon>
      <mat-icon *ngIf="!query" fontSet="partIcon" fontIcon="part-search"></mat-icon>
    </mat-form-field>

    <!-- Filtering -->
    <div class="filtering" fxFlex="1 1 100%">

      <mat-form-field class="filter contry no-underline">
        <mat-select placeholder="Country" [formControl]="countries" multiple>
          <mat-option>All countries</mat-option>
          <mat-option *ngFor="let country of countryList" [value]="country">{{ country }}</mat-option>
        </mat-select>
      </mat-form-field>
  
      <mat-form-field class="filter category no-underline">
        <mat-select placeholder="Categories" [formControl]="categories" multiple>
          <mat-option>All categories</mat-option>
          <mat-option *ngFor="let category of categoryList" [value]="category">{{ category }}</mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <!-- Sorting -->
    <mat-form-field class="filter sorting" fxFlex="0 1 300px">
      <mat-select placeholder="Sort by">
        <mat-option>Default</mat-option>
        <mat-option *ngFor="let sorting of sortings" [value]="sorting.value">
          {{ sorting.viewValue }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <div class="display" fxFlex="0 1 80px" fxLayout="row" fxLayoutGap="15px">
      <!-- FIXME: add ".active" class to currently selected view + needs to implement functionality -->
      <mat-icon class="icon active" fontSet="partIcon" fontIcon="part-overview" matTooltip="Grid view"></mat-icon>
      <mat-icon class="icon" fontSet="partIcon" fontIcon="part-hamburger" matTooltip="List view"></mat-icon>
    </div>

  </div><!-- .control-bar -->
</app-header>



<div class="container-block" fxLayout="row">

  <div class="sidebar" fxFlex="25%">

    <div class="subtitle first">Categories</div>

    <mat-expansion-panel *ngFor="let category of _rootCategoryList.subCategoryList" class="category-filter no-padding">
      <mat-expansion-panel-header class="category-filter-header">
        <span class="title">{{category.name}}</span>
      </mat-expansion-panel-header>
      <mat-nav-list class="category-items">
        <a mat-list-item *ngFor="let subcategory of category.subCategoryList" class="category-item" >{{subcategory.name}}</a>
      </mat-nav-list>
    </mat-expansion-panel>
  
    <div class="subtitle">Filter by price range</div>
    <mat-card>
      price filter
    </mat-card>

  </div><!-- .sidebar -->


  <div class="content disable-select" fxFlex="75%" fxLayout="row wrap" fxLayoutAlign="start start">
    <ng-container *ngFor="let l of listings">
      <mat-card class="listing" fxFlex="0 0 calc(100% / 3 - 30px)">
        <app-preview-listing [listing]="l"></app-preview-listing>
      </mat-card>
    </ng-container>
  </div><!-- .content -->

</div>

