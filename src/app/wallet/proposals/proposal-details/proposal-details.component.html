<mat-card class="proposal">

  <div class="header">
    <div class="meta">
      <div class="id">#13</div>
      <div class="title">
        {{proposal?.title}}
        <!-- TODO: show only on Proposals created by team (how to implement this?) -->
        <!-- <span class="tag TO_DO" matTooltip="This proposal has been submitted by Particl team" matTooltipPosition="after">Official</span> -->
      </div>
    </div>
    <!-- TODO: only show "blocks-left" on ACTIVE proposals -->
    <div class="blocks-left TO_DO" *ngIf="selectedTab == 'active'">
      <mat-progress-bar mode="determinate" value="67" matTooltip="Blocks left for voting" matTooltipPosition="before"></mat-progress-bar>
      <div class="text">{{currentBlockCount}} blocks left</div>
    </div>
    <!-- TODO: only show "blocks-left.results" on PAST proposals -->
    <div class="blocks-left results TO_DO" *ngIf="selectedTab == 'past'">
      <mat-progress-bar mode="determinate" value="100"></mat-progress-bar>
      <div class="text">voting finished on block {{currentBlockCount}}</div>
    </div>
  </div>

  <div class="body">

    <div class="content">
      <div class="description">
        <div class="subtitle">Proposal description</div>
        <p [innerHtml]="proposal?.description">
        </p>
      </div>
      <!-- .description -->

      <!-- <div class="more-links">
              <!- TODO: link to proposal's Github PIP page (@kewde: if we can connect it) ->
              <a href="https://github.com" target="_blank" mat-button class="small" color="basic">
                <mat-icon class="icon" fontSet="partIcon" fontIcon="part-globe"></mat-icon>
                Link to discussion
              </a>
              <!- TODO: ability to trigger reporting/governance for each proposal ->
              <a href="https://github.com" mat-button class="small" color="basic"
                 *ngIf="selectedTab == 'active'">
                <mat-icon class="icon" fontSet="partIcon" fontIcon="part-flag"></mat-icon>
                Report
              </a>
            </div> -->
    </div>

    <div class="sidebar TO_DO">
      <div class="graph">
        <div class="subtitle">Voting progress</div>
        <div class="graph">
          <nvd3 *ngIf="graphData && graphData.length" [options]="graphOptions" [data]="graphData"></nvd3>
        </div>
        <div class="percentage-voted">
          <!-- TODO: implement % of coins voted in total for this proposal -->
          <span class="value">24.65&thinsp;%</span>
          coins voted
        </div>
      </div>
    </div>

  </div>

  <!-- TODO: only show "action bar" on ACTIVE proposals -->
  <div class="action-bar TO_DO" *ngIf="selectedTab == 'active'">
    <div class="text item">Select your vote for this Proposal:</div>

    <div class="options item">
      <mat-form-field class="voting-options" floatPlaceholder="never">
        <mat-select placeholder="Select to vote" [(ngModel)]="selectedOption">
          <mat-option *ngFor="let option of proposal?.options" [value]="option.optionId">
            {{ option.description }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <button mat-raised-button color="primary" class="vote-button item" (click)="vote()">
      <mat-icon class="icon" fontSet="partIcon" fontIcon="part-check"></mat-icon>
      Vote
    </button>
  </div>

</mat-card>